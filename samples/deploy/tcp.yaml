apiVersion: apisix.apache.org/v2
kind: ApisixRoute
metadata:
  name: rbd-tcp-route
spec:
  stream:



    - name:
      protocol: TCP
      match:
        ingressPort:
      backend:
        serviceName: rbd-api-healthz
        servicePort: 8889

    - name: rbd-ws
      protocol: TCP
      match:
        ingressPort: 6060
      backend:
        serviceName: rbd-api-websocket
        servicePort: 6060

---
apiVersion: apisix.apache.org/v2
kind: ApisixRoute
metadata:
  name: db-route
spec:
  stream:
    - name: rbd-ws
      protocol: TCP
      match:
        ingressPort: 10000
      backend:
        serviceName: rbd-db-rw
        servicePort: 3306
    - name: rbd-monitor
      protocol: TCP
      match:
        ingressPort: 10001
      backend:
        serviceName: rbd-monitor
        servicePort: 9999